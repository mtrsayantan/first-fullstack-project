<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mtr|Course Material</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="new.css">
</head>
<body>
    <header>
        <h1 class="mtr">Mtr</h1>
        <div>
            <% if (user) { %>
                <p class="user">Welcome, <%= user.email %></p>
                <nav>
                    <button class="checkbtn"><i class="fa fa-2x fa-bars"></i></button>
                    <ul>
                        <li><a href="/course?email=<%= user.email %>">Course Page</a></li>
                        <li><a href="/task?email=<%= user.email %>">Task Page</a></li>
                        <li><a href="/profile">Profile Page</a></li>
                        <li><a href="/signout">Sign Out</a></li>
                    </ul>
                </nav>
            <% } %>  
        </div> 
    </header>
    <section>
        <h2 class="lhead">Learn basic python from this lessons</h2>
    </section>
    <section class="lessons">
        <div class="container">
            <div id="lesson-1" class="lesson-item lesson-border">
                <p>lesson-1</p>
            </div>
            <div id="lesson-2" class="lesson-item">
                <p>lesson-2</p>
            </div>
            <div id="lesson-3" class="lesson-item">
                <p>lesson-3</p>
            </div>
        </div>
    </section>
    <hr>
    <section class="lesson-content">
        <div class="container">
            <!-- lesson content 1 -->
            <div id="lesson-1-content" class="lesson-content-item show">
                <div class="lesson-1-content-inner">
                    <div class="lsn-head">
                        <h3>Instruction</h3>
                    </div>
                    <div>
                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Cumque id quisquam nihil dolor
                        voluptas. Numquam mollitia omnis culpa dolorem asperiores sequi voluptatem nobis minima
                        suscipit, tempora ipsam perspiciatis nisi? Eum nobis repellendus dolore, odio exercitationem
                        deleniti harum maxime impedit ipsum dignissimos. Minima ipsa similique ipsam quam repellat
                        explicabo quisquam aspernatur rem, dicta nesciunt enim iure laudantium, consectetur nisi neque
                        perspiciatis quod ut dignissimos accusantium ex! Perspiciatis nam dolorem dignissimos, vel
                        cupiditate neque id earum aperiam quibusdam? Natus modi porro nemo. Voluptatibus officiis esse
                        libero sint omnis. Saepe ipsam perspiciatis eveniet optio! Provident esse laboriosam corporis,
                        quo sit quod necessitatibus ratione! Lorem ipsum dolor sit amet consectetur adipisicing elit.
                    </div>
                    <div class="iframe-container">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/kqtD5dpn9C8"
                            title="YouTube video player" frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen></iframe>
                    </div>
                    
                        <form action="" id="form1">
                            <input type="hidden" name="email" value="<%=user.email%>">
                            <input type="checkbox" id="lsn1" name="lsn1Status" class="check">
                            <% var flag = 0; %>
                            <% for(i=0; i<course.length; i+=1){ %>
                                <% if(course[i].lsn1Status==='on') { %>
                                    <% flag = 1; %>
                                    <% break; %>
                                <% } %> 
                            <% } %> 
                            <% if(flag === 0) { %>   
                                <button class="status">
                                    <label for="lsn1" style="cursor: pointer;">Mark As Completed</label>
                                </button>
                            <% }else{ %>
                                <span class="complete">Completed</span>
                            <% } %>    
                        </form>      
                </div>
            </div>
            <!-- lesson content 2 -->
            <div id="lesson-2-content" class="lesson-content-item">
                <div class="lesson-2-content-inner">
                    <div class="lsn-head">
                        <h3>Instruction</h3>
                    </div>
                    <div>
                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Cumque id quisquam nihil dolor
                        voluptas. Numquam mollitia omnis culpa dolorem asperiores sequi voluptatem nobis minima
                        suscipit, tempora ipsam perspiciatis nisi? Eum nobis repellendus dolore, odio exercitationem
                        deleniti harum maxime impedit ipsum dignissimos. Minima ipsa similique ipsam quam repellat
                        explicabo quisquam aspernatur rem, dicta nesciunt enim iure laudantium, consectetur nisi neque
                        perspiciatis quod ut dignissimos accusantium ex! Perspiciatis nam dolorem dignissimos, vel
                        cupiditate neque id earum aperiam quibusdam? Natus modi porro nemo. Voluptatibus officiis esse
                        libero sint omnis. Saepe ipsam perspiciatis eveniet optio! Provident esse laboriosam corporis,
                        quo sit quod necessitatibus ratione! Lorem ipsum dolor sit amet consectetur adipisicing elit.
                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Sint nam nemo, harum rerum similique
                        dolorem nulla quod fugiat vero sequi adipisci architecto dolore nihil. Quidem quia quod ea
                        pariatur dolor similique maxime.
                    </div>
                    <div class="iframe-container">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/t8pPdKYpowI"
                            title="YouTube video player" frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen></iframe>
                    </div>
                    <form action="" id="form2">
                        <input type="hidden" name="email" value="<%=user.email%>">
                        <input type="checkbox" id="lsn2" name="lsn2Status" class="check">
                        <% var flag = 0; %>
                            <% for(i=0; i<course.length; i+=1){ %>
                                <% if(course[i].lsn2Status==='on') { %>
                                    <% flag = 1; %>
                                    <% break; %>
                                <% } %> 
                            <% } %> 
                            <% if(flag === 0) { %>   
                                <button class="status">
                                    <label for="lsn2" style="cursor: pointer;">Mark As Completed</label>
                                </button>
                            <% }else{ %>
                                <span class="complete">Completed</span>
                            <% } %>    
                    </form>
                </div>
            </div>
            <!-- lesson content 3 -->
            <div id="lesson-3-content" class="lesson-content-item">
                <div class="lesson-3-content-inner">
                    <div class="lsn-head">
                        <h3>Instruction</h3>
                    </div>
                    <div>
                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Cumque id quisquam nihil dolor
                        voluptas. Numquam mollitia omnis culpa dolorem asperiores sequi voluptatem nobis minima
                        suscipit, tempora ipsam perspiciatis nisi? Eum nobis repellendus dolore, odio exercitationem
                        deleniti harum maxime impedit ipsum dignissimos. Minima ipsa similique ipsam quam repellat
                        explicabo quisquam aspernatur rem, dicta nesciunt enim iure laudantium, consectetur nisi neque
                        perspiciatis quod ut dignissimos accusantium ex! Perspiciatis nam dolorem dignissimos, vel
                        cupiditate neque id earum aperiam quibusdam? Natus modi porro nemo. Voluptatibus officiis esse
                        libero sint omnis. Saepe ipsam perspiciatis eveniet optio! Provident esse laboriosam corporis,
                        quo sit quod necessitatibus ratione! Lorem ipsum dolor sit amet consectetur adipisicing elit.
                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Sint nam nemo, harum rerum similique
                        dolorem nulla quod fugiat vero sequi adipisci architecto dolore nihil. Quidem quia quod ea
                        pariatur dolor similique maxime. Lorem, ipsum dolor sit amet consectetur adipisicing elit.
                        Molestiae porro, corporis facere provident maiores fugiat totam eos libero autem quibusdam dolor
                        saepe, dignissimos vitae error et! Placeat amet fugit, nisi animi atque modi itaque, repellendus
                        quas repudiandae aliquid ullam labore tempora! Placeat sunt perferendis numquam est saepe autem
                        quibusdam harum adipisci debitis. Officiis, rerum ad! Eaque sed asperiores dignissimos dolorum
                        nulla aspernatur nisi voluptate molestiae rem totam quia, qui magni est doloremque minima.
                    </div>
                    <div class="iframe-container">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/iJblwyN0c0M"
                            title="YouTube video player" frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen></iframe>
                    </div>
                    <form action="" id="form3">
                        <input type="hidden" name="email" value="<%=user.email%>">
                        <input type="checkbox" id="lsn3" name="lsn3Status" class="check">
                        <% var flag = 0; %>
                            <% for(i=0; i<course.length; i+=1){ %>
                                <% if(course[i].lsn3Status==='on') { %>
                                    <% flag = 1; %>
                                    <% break; %>
                                <% } %> 
                            <% } %> 
                            <% if(flag === 0) { %>   
                                <button class="status">
                                    <label for="lsn3" style="cursor: pointer;">Mark As Completed</label>
                                </button>
                            <% }else{ %>
                                <span class="complete">Completed</span>
                            <% } %>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <p>&copy;copyright 2021 Mtr</p>
    </footer>
    <script>
        const lsnItems = document.querySelectorAll('.lesson-item');
        const lsnContentItems = document.querySelectorAll('.lesson-content-item');
        const form1 = document.getElementById('form1');
        const form2 = document.getElementById('form2');
        const form3 = document.getElementById('form3');

        function selectItem(e) {
            removeBorder();
            removeShow();
            //Add border to current lesson
            this.classList.add('lesson-border');
            const lsnContentItem = document.querySelector(`#${this.id}-content`);
            //Add show class
            lsnContentItem.classList.add('show');
        }
        function removeBorder() {
            lsnItems.forEach(item => item.classList.remove('lesson-border'));
        }
        function removeShow() {
            lsnContentItems.forEach(item => item.classList.remove('show'));
        }
        //Listen for click
        lsnItems.forEach(item => item.addEventListener('click', selectItem));
        
        form1.addEventListener('submit', async(e) => {
            e.preventDefault();
            const email= form1.email.value;
            const lsn1Status = form1.lsn1Status.value; 
            try {
                const res = await fetch('/course', {
                    method: 'post',
                    body: JSON.stringify({ email, lsn1Status }),
                    headers: { 'Content-Type': 'application/json' }
                });
                const data = await res.json();
                if(data){
                    location.assign(`/course?email=${ email }`);
                }
            } catch (error) {
                console.log(err);
            }
        })
        form2.addEventListener('submit', async(e) => {
            e.preventDefault();
            const email= form2.email.value;
            const lsn2Status = form2.lsn2Status.value; 
            try {
                const res = await fetch('/course', {
                    method: 'post',
                    body: JSON.stringify({ email, lsn2Status }),
                    headers: { 'Content-Type': 'application/json' }
                });
                const data = await res.json();
                if(data){
                    location.assign(`/course?email=${ email }`);
                }
            } catch (error) {
                console.log(err);
            }
        })
        form3.addEventListener('submit', async(e) => {
            e.preventDefault();
            const email= form3.email.value;
            const lsn3Status = form3.lsn3Status.value; 
            try {
                const res = await fetch('/course', {
                    method: 'post',
                    body: JSON.stringify({ email, lsn3Status }),
                    headers: { 'Content-Type': 'application/json' }
                });
                const data = await res.json();
                if(data){
                    location.assign(`/course?email=${ email }`);
                }
            } catch (error) {
                console.log(err);
            }
        })
    </script>
</body>
</html>